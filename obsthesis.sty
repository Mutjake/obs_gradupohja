\ProvidesPackage{obsthesis}

%  Packages:
% * blindtext
%   - Can be used to create loremipsum-ish dummy text etc. using commands such as \blindtext and \Blindtext
%   - see: https://www.texlive.info/CTAN/macros/latex/contrib/blindtext/blindtext.pdf
% * polyglossia
%   - Does multilingual typesetting and things like hyphenation in XeLaTeX and LuaLaTeX, alternative to babel (whatever that is)
% * fontspec 
%   - OpenType font support to utilize Libertinus to match the font requirements of OBS thesis
% * csquotes
%   - "Context sensitive quotation facilities"
%   - AFAIK helps to get fancy quotation marks plus correct use of ellipsis etc.
%   - Also helps with polyglossia if quoting in other languages so that the quotes are formatted and hyphenated correctly it seems
%   - And I quess this helps when needing referenced quote from the source material
% * graphicx
%   - Better support for including graphics to the document

\usepackage{blindtext} 
\usepackage{polyglossia}
\usepackage{fontspec}
\usepackage[english=british]{csquotes}
\usepackage[xetex]{graphicx}
\usepackage{setspace}
\usepackage[bottom=2.5cm,top=2.5cm,left=4cm,right=2.5cm]{geometry}

\def\citeapos#1{\citeauthor{#1} \citeyear{#1}}

% Some of this stuff from: https://github.com/ivo-s/thesis-libertinus/blob/master/thesis.tex
\usepackage[style=apa,citestyle=apa,backend=biber]{biblatex}
\usepackage[unicode]{hyperref}
\usepackage{xcolor}
\usepackage{amsmath}
\usepackage[font=small,labelfont=bf]{caption}
\usepackage{fancyhdr}
\usepackage{titlesec}
\usepackage{pdfpages}
\usepackage{microtype}
\usepackage{unicode-math}
\usepackage{import}
\usepackage{tocloft}
\usepackage{setspace}

\setdefaultlanguage[variant=uk]{english} % UK english to make Chris Bradley happy (thank you for the CDMP course!)

\setmainfont{LibertinusSerif}[
   UprightFont = *-Regular,
   BoldFont = *-Bold,
   ItalicFont = *-Italic,
   BoldItalicFont = *-BoldItalic,
   Extension = .otf]

\titleformat*{\section}{\normalfont\fontsize{12}{15}\bfseries\MakeUppercase}
\titlespacing*{\section}{0pt}{5.5ex plus 1ex minus .2ex}{4.3ex plus .2ex}
\titleformat*{\subsection}{\normalfont\fontsize{12}{15}\bfseries}
\titlespacing*{\subsection}{0pt}{5.5ex plus 1ex minus .2ex}{4.3ex plus .2ex}
%\titleformat*{\subsubsection}{\itshape\subsubsectionfont}

\def\author{\def\author}
\def\title{\def\title}
\def\coursename{\def\coursename}
\def\department{\def\department}
\def\date{\def\date}

\hypersetup{
    pdfauthor={Firstname Lastname},
    pdftitle={The Title of the Thesis},
    pdfsubject={Thesis},
    pdfkeywords={Thesis Template}
}

\pagestyle{fancy}

\fancyhf{}
\renewcommand{\headrulewidth}{0pt}
\fancyhead[R]{\thepage}

% New page for every section
\AddToHook{cmd/section/before}{\clearpage}

% Dots to contents for sections as well

\renewcommand{\cftsecleader}{\cftdotfill{\cftdotsep}}
\renewcommand{\cfttoctitlefont}{\normalfont\fontsize{12}{15}\bfseries\MakeUppercase}
\renewcommand{\cftsecfont}{\normalfont\fontsize{12}{15}\bfseries}
\renewcommand{\cftsubsecfont}{\normalfont\fontsize{12}{15}\bfseries}
\renewcommand\cftsecafterpnum{\vskip15pt}
\renewcommand{\cftdotsep}{1}
\renewcommand{\cftsecfont}{\normalfont\bfseries}
\renewcommand{\cftsubsecpresnum}{\normalfont\bfseries}
\renewcommand{\@tocrmarg}{1.55em}
\patchcmd{\l@section}{#1}{\MakeUppercase{#1}}{}{}% Sections use UPPERCASE in ToC

\onehalfspacing

\setlength\bibitemsep{5\itemsep}